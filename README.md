<div align="center">

  <h1 align="center">CCTV-analytics-app</h3>

  <p align="center">
    Веб-приложение аналитики системы видеонаблюдения
    <br />
  </p>

</div>

<!-- TABLE OF CONTENTS -->
## Содержание
  <ol>
    <li>
      <a href="#О проекте">О проекте</a>
    </li>
    <li>
      <a href="#Технологии">Технологии</a>
    </li>
    <li><a href="#Функции">Функции</a></li>
    <li><a href="#Архитектура">Архитектура</a></li>
    <li><a href="#Анализ">Анализ</a></li>
    <li><a href="#AJAX запросы">AJAX запросы</a></li>
    <li><a href="#Интерфейс">Интерфейс</a></li>
    <li><a href="#Документация">Документация</a></li>
    <li><a href="#Контакты">Контакты</a></li>
  </ol>


## О проекте
В веб-приложении реализована автоматизация обнаружения угроз на видео и изображениях, полученных из системы видеонаблюдения.

* Использована нейронная сеть для распознавания холодного оружия
* Реализована обработка видео и изображений
* Интегрирована модель машинного обучения в клиентскую часть системы
* Реализованы сбор и хранение архива обнаружения на сервере

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>

## Технологии
* **Figma** — для создания макета
* **TypeScript** — для создания веб-страниц
* **React** — для разработки пользовательского интерфейса
* **React Router** — для маршрутизации 
* **Material-UI** — для построения интерфейса
* **Axios** — для выполнения HTTP-запросов
* **ONNX** — для построения нейронной сети и переноса в браузер
* **ONNX Runtime Web** — для запуска модели машинного обучения в браузере

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>

## Функции

**Use Case диаграмма**

![](/assets/use-case.jpg)

Две роли пользователей:
* *Сотрудник службы безопасности.* Функции: анализ видео и изображений
* *Администратор.* Функции: анализ видео и изображений, работа с отчётом об обнаружении, работа с пользователями

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>

## Архитектура

**Диаграмма компонентов**

![](/assets/components.jpg)

Два набора API :
* Для работы с пользователями
* Для работы с отчетами

Компоненты анализа видео и изображений взаимодействуют с моделью ONNX на стороне клиента

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>

## Анализ

**Схема анализа видео**

![](/assets/analysis.jpg)

Анализ видео:
* *Функция обработки видео:* выбор кадров из видео
* *Функция анализа:* преобразование изображения, запуск модели, обработка выходных данных, отображение рамки

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>

## AJAX запросы

**Диаграмма последовательности**

![](/assets/sequence.jpg)

* Загрузка веб-страницы
* Создание React-приложения
* Вызов API на страницах
* Подключение модели машинного обучения к клиентской части приложения

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>

## Интерфейс
### Страница "Управление пользователями"
![](/assets/interface_1.1.png)

* В списке пользователей содержится: логин, фамилия, имя, телефон, email
* Кнопки для изменения, удаления и добавления пользователя

### Страница "Анализ видео"
![](/assets/interface_2.1.png)

* При выборе файла правильного формата и нажатии на кнопку «Анализ», начинается анализ видео моделью машинного обучения 
* Отображается значок загрузки и сообщение о происходящем процессе

### Страница "Анализ видео" с обнаруженными угрозами
![](/assets/interface_3.1.png)

* На видео обнаружено холодное оружие
* Отчет об обнаруженных угрозах содержит: кадры из видео с выделенными в рамку обнаруженными объектами, время на видео

### Страница "Отчёт об обнаружении"
![](/assets/interface_4.1.png)

* Таблица содержит информацию о ранее обнаруженных угрозах: вид угрозы, дата, время, изображение, видео
* Изображение и видео можно просмотреть и загрузить с сервера

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>

## Документация
По результатам работы над проектом разработаны 
[методические указания по запуску и развертыванию модели машинного обучения в браузере с использованием ONNX YOLOv7 в TypeScript](https://github.com/DariaVasilchenko/CCTV-analytics-app/tree/main/onnx_yolov7_ts_example)

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>

## Контакты
Дарья Васильченко - vasilchenkodd@gmail.com

Ссылка на проект: https://github.com/DariaVasilchenko/CCTV-analytics-app

<p align="right">(<a href="#Содержание">К содержанию</a>)</p>